/* 使用最高权重确保样式不被覆盖 */
html body #__gather_subtitles_container__ {
    position: fixed !important;
    left: 50% !important;
    bottom: 3% !important;
    transform: translateX(-50%) !important;
    max-width: 55vw !important;
    max-height: 40vh !important;
    overflow-y: auto !important;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Noto Sans CJK", Arial, sans-serif !important;
    z-index: 2147483647 !important;
    padding: 8px 12px !important;
    background: rgba(0,0,0,0.8) !important;
    border-radius: 10px !important;
    backdrop-filter: saturate(150%) blur(6px) !important;
    pointer-events: none !important;
    border: 2px solid rgba(255,255,255,0.1) !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3) !important;
    visibility: visible !important;
    display: block !important;
    opacity: 1 !important;
    margin: 0 !important;
    min-height: 0 !important;
    min-width: 0 !important;
    width: auto !important;
    height: auto !important;
    /* 平滑滚动 */
    scroll-behavior: smooth !important;
}

/* 新布局：历史区 + 当前区 */
html body #__gather_subtitles_history__ {
    margin-bottom: 8px !important;
}

/* 历史行（仅目标语种） */
html body #__gather_subtitles_container__ .subtitle-line.history {
    margin: 4px 0 !important;
    background: rgba(0,0,0,0.55) !important;
    border: 1px solid rgba(255,255,255,0.1) !important;
    padding: 6px 10px !important;
}

/* 当前行（仅源语种，较大） */
html body #__gather_subtitles_container__ .subtitle-line.current {
    margin: 6px 0 !important;
    background: rgba(0,0,0,0.75) !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
    padding: 12px 16px !important;
}

/* 历史目标语种英文样式（zh→en 情况） */
html body #__gather_subtitles_container__ .subtitle-line.history .en {
    font-size: 20px !important;
    font-weight: 500 !important;
}

/* 当前源语种中文样式（更大更粗） */
html body #__gather_subtitles_container__ .subtitle-line.current .zh {
    font-size: 26px !important;
    font-weight: 700 !important;
}

/* 当前源语种英文样式（en 原文时） */
html body #__gather_subtitles_container__ .subtitle-line.current .en {
    font-size: 28px !important;
    font-weight: 700 !important;
}

/* 自定义滚动条样式 - WebKit浏览器 */
html body #__gather_subtitles_container__::-webkit-scrollbar {
    width: 6px !important;
}

html body #__gather_subtitles_container__::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: 3px !important;
}

html body #__gather_subtitles_container__::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.4) !important;
    border-radius: 3px !important;
    transition: background 0.3s ease !important;
}

html body #__gather_subtitles_container__::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.6) !important;
}

/* Firefox 滚动条样式 */
html body #__gather_subtitles_container__ {
    scrollbar-width: thin !important;
    scrollbar-color: rgba(255, 255, 255, 0.4) rgba(255, 255, 255, 0.1) !important;
}

/* YouTube特殊覆盖 */
#page-manager #__gather_subtitles_container__,
ytd-app #__gather_subtitles_container__,
#movie_player #__gather_subtitles_container__ {
    position: fixed !important;
    z-index: 2147483647 !important;
    visibility: visible !important;
    display: block !important;
}

html body #__gather_subtitles_container__ .subtitle-line {
    margin: 6px 0 !important;
    line-height: 1.3 !important;
    color: #fff !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.7) !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: rgba(0,0,0,0.6) !important;
    padding: 12px 16px !important;
    border-radius: 8px !important;
    border: 1px solid rgba(255,255,255,0.1) !important;
    animation: fadeIn 0.3s ease-in !important;
}

html body #__gather_subtitles_container__ .subtitle-line .zh { 
    font-size: 22px !important; 
    font-weight: 500 !important;
    color: #fff !important;
    margin: 0 !important;
    display: block !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.9) !important;
    line-height: 1.5 !important;
    text-align: center !important;
    letter-spacing: 0.5px !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    white-space: pre-wrap !important;
    max-width: 100% !important;
}

/* 字幕开关按钮样式 */
html body #__gather_subtitles_toggle__ {
    position: fixed !important;
    right: 20px !important;
    bottom: 20px !important;
    width: 50px !important;
    height: 50px !important;
    background: rgba(0, 0, 0, 0.8) !important;
    border-radius: 25px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: pointer !important;
    z-index: 2147483648 !important;
    border: 2px solid rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: saturate(150%) blur(6px) !important;
    transition: all 0.3s ease !important;
    font-size: 24px !important;
    user-select: none !important;
    pointer-events: auto !important;
    visibility: visible !important;
    opacity: 1 !important;
}

html body #__gather_subtitles_toggle__:hover {
    background: rgba(0, 0, 0, 0.9) !important;
    border-color: rgba(255, 255, 255, 0.4) !important;
    transform: scale(1.1) !important;
}

html body #__gather_subtitles_toggle__:active {
    transform: scale(0.95) !important;
}

/* 字幕动画效果 */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-10px);
    }
}

/* 历史字幕样式 - 更紧凑 */
html body #__gather_subtitles_container__ .subtitle-line.history {
    background: rgba(0,0,0,0.5) !important;
    opacity: 0.8 !important;
    border: 1px solid rgba(255,255,255,0.08) !important;
    margin: 2px 0 !important;
    padding: 6px 10px !important;
    font-size: 18px !important;
}

html body #__gather_subtitles_container__ .subtitle-line.history:first-child {
    opacity: 0.6 !important;
    background: rgba(0,0,0,0.4) !important;
    padding: 4px 8px !important;
    font-size: 16px !important;
}

/* 当前字幕样式增强 */
html body #__gather_subtitles_container__ .subtitle-line.current {
    background: rgba(0,0,0,0.7) !important;
    opacity: 1 !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
    margin: 8px 0 !important;
    padding: 12px 16px !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
}

/* 字幕容器调整以支持多行显示 */
/* 已合并到主样式中，避免重复 */

/* 部分结果字幕样式 - 更紧凑 */
html body #__gather_subtitles_container__ .subtitle-line.partial {
    background: rgba(0,0,0,0.65) !important;
    border: 2px dashed rgba(255,255,255,0.3) !important;
    opacity: 1 !important;
    margin: 4px 0 !important;
    padding: 8px 12px !important;
    box-shadow: 0 0 10px rgba(255,255,255,0.1) !important;
    animation: pulse 1.5s ease-in-out infinite alternate !important;
}

/* 部分结果脉搏动画 */
@keyframes pulse {
    0% {
        opacity: 0.9;
        box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    100% {
        opacity: 1;
        box-shadow: 0 0 15px rgba(255,255,255,0.2);
        border-color: rgba(255,255,255,0.4);
    }
}

/* 滚动指示器 - 当有更多内容时显示 */
html body #__gather_subtitles_container__::after {
    content: "⬇️ 滚动查看更多" !important;
    position: sticky !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    background: linear-gradient(transparent, rgba(0,0,0,0.9)) !important;
    text-align: center !important;
    font-size: 12px !important;
    color: rgba(255,255,255,0.6) !important;
    padding: 8px 4px 4px 4px !important;
    pointer-events: none !important;
    opacity: 0 !important;
    transition: opacity 0.3s ease !important;
}

/* 只有在可滚动时才显示滚动指示器 */
html body #__gather_subtitles_container__.scrollable::after {
    opacity: 1 !important;
}

/* 当前最终结果字幕样式增强 */
html body #__gather_subtitles_container__ .subtitle-line.current {
    background: rgba(0,0,0,0.7) !important;
    opacity: 1 !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
    margin: 8px 0 !important;
    padding: 12px 16px !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
    animation: fadeIn 0.3s ease-in !important;
}
  
